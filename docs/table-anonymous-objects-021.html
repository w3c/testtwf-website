<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <title>CSS Test: Auto-imported from Gecko test 277995-1.html</title>
  <link rel="author" href="mailto:bzbarsky@mit.edu" title="Boris Zbarsky">
  <link rel="help"
        href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes">
  <meta name="flags" content="dom">

  <script language="javascript" type="text/javascript">
    function doMore(data) {
      while(data.hasChildNodes()) 
        data.removeChild(data.firstChild);
      for (var i = 0; i < 10; i++) {
	append(data);
      }
    }

    function append(data) {
      var row = document.createElement("div");
      row.setAttribute("class", "row");

      var cell = document.createElement("span");
      cell.appendChild(document.createTextNode("More Data"));
      cell.setAttribute("style", "cell");
      row.appendChild(cell);
      data.appendChild(row);
    }

    function doTest() {
      for (var i = 0; i < 10; ++i) {
        document.body.offsetWidth;
        doMore(document.getElementById('data'));
      }
      document.documentElement.className = '';
    }
  </script>
  <style>
    .table {
      display: table;
    }
    .row {
      display: table-row;

    }
    .cell {
      display: table-cell;
    }
  </style>
</head>
<body onload="doTest()">
There should be no red below, except for antialiasing issues.
<div style="position: relative; font-size: 2em;">
<div style="position: relative; z-index: 1; color: red; padding: 1px;">

<table>
  <tbody><tr>
    <td>
      <div id="data" class="table">
      </div>
    </td>
  </tr>
</tbody></table>
</div>
<div style="position: absolute; z-index: 2; top: 0; color: green;
            padding: 1px;">

<table>
  <tbody><tr>
    <td>
      <div style="display: table">
        <div style="display: table-row-group" id="data">
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
          <div style="display: table-row">
            <div style="display: table-cell">
              More Data
            </div>
          </div>
        </div>
      </div>
    </td>
  </tr>
</tbody></table>
</div>
</div>
</body>
</html>